version: '2'
services:
  node:
    build: .
    ports:
     - "80:3000"
    environment:
      - CODE_REVIEW_HOST=git
      - CODE_REVIEW_PROJECT_ID=123
      - CODE_REVIEW_PRIVATE_TOKEN=EsspXz7kinZN9RayS8sG
    volumes:
     - ../back-end-node:/projeto
  php:
    build: .
    ports:
     - "8888:80"
    volumes:
     - ..:/var/www/html/
  couchdb:
    image: "couchdb"
    environment:
      - COUCHDB_USER=root
      - COUCHDB_PASSWORD=pass
    volumes:
        - ./couchdb-dados:/usr/local/var/lib/couchdb
    ports:
     - "5984:5984"
  fauxton:
    image: 3apaxicom/fauxton
    ports:
      - "8984:8000"
    links:
      - couchdb:db
    command:
      - sh
      - "-c"
      - "fauxton -c http://db:5984"
  gitlab:
    image: gitlab/gitlab-ce
    ports:
      - "8090:80"